<h1 mat-dialog-title>{{ isEditing ? "Update" : "Create" }} Exam Result</h1>

<div mat-dialog-content>
  <form
    [formGroup]="form"
    fxLayout
    fxLayout.xs="column"
    fxLayoutGap="10px"
    novalidate
  >
    <mat-form-field fxFlex="75%">
      <mat-label>Exame</mat-label>
      <input
        type="text"
        matInput
        formControlName="exam"
        [matAutocomplete]="auto"
        required
      />
      <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
        <mat-option
          *ngFor="let option of filteredOptions | async"
          [value]="option"
        >
          {{ option.name }}
        </mat-option>
      </mat-autocomplete>
      <mat-error
        *ngFor="
          let error of formErrorService.mapErrors(form.get('exam')?.errors)
        "
      >
        {{ error }}
      </mat-error>
    </mat-form-field>

    <mat-form-field fxFlex="25%">
      <input
        [dropSpecialCharacters]="true"
        formControlName="value"
        mask="separator.2"
        thousandSeparator="."
        matInput
        placeholder="Value (kg)"
        required
      />
      <mat-error
        *ngIf="!form.controls['value'].valid && form.controls['value'].touched"
      >
        {{ getErrorValue() }}
      </mat-error>
    </mat-form-field>
  </form>
</div>

<div fxLayout fxLayoutAlign="end" mat-dialog-actions>
  <button fxflex mat-button [mat-dialog-close]="true">Cancel</button>

  <button
    [disabled]="!form.valid"
    fxflex
    mat-button
    *ngIf="!isEditing"
    type="button"
    (click)="onCreate()"
  >
    Create
  </button>

  <button
    [disabled]="!form.valid"
    fxflex
    mat-button
    *ngIf="isEditing"
    type="button"
    (click)="onUpdate(form)"
  >
    Update
  </button>
</div>
