<div class="grid-container">
  <h1 class="mat-h1">Weights</h1>

  <div class="mat-elevation-z8">
    <button
      class="custom-button"
      color="accent"
      mat-fab
      (click)="onWeightFormDialogOpen()"
    >
      <fa-icon [icon]="['fas', 'plus']" size="lg"></fa-icon>
    </button>

    <mat-table [dataSource]="weights | slice: initialRange():finalRange()">
      <!-- Date Column -->
      <ng-container matColumnDef="id">
        <mat-header-cell *matHeaderCellDef> ID </mat-header-cell>
        <mat-cell *matCellDef="let element">
          {{ element.id }}
        </mat-cell>
      </ng-container>

      <!-- Date Column -->
      <ng-container matColumnDef="date">
        <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
        <mat-cell *matCellDef="let element">
          {{ element.date | formatDatetimeUtc: "DD/MM/YYYY HH:mm" }}
        </mat-cell>
      </ng-container>

      <!-- Height Column -->
      <ng-container matColumnDef="height">
        <mat-header-cell *matHeaderCellDef> Height (m) </mat-header-cell>
        <mat-cell *matCellDef="let element">
          {{ element.height | number: "0.2-2" }}
        </mat-cell>
      </ng-container>

      <!-- Value Column -->
      <ng-container matColumnDef="value">
        <mat-header-cell *matHeaderCellDef> Value (kg) </mat-header-cell>
        <mat-cell *matCellDef="let element">
          {{ element.value | number: "0.2-2" }}
        </mat-cell>
      </ng-container>

      <!-- Range Column -->
      <ng-container matColumnDef="range">
        <mat-header-cell *matHeaderCellDef> Range (kg)</mat-header-cell>
        <mat-cell *matCellDef="let element">
          {{ element.minimum | number: "0.2-2" }} -
          {{ element.maximum | number: "0.2-2" }}
        </mat-cell>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
        <mat-cell *matCellDef="let row">
          <button
            mat-icon-button
            matTooltip="Edit this item"
            (click)="onEdit(row)"
          >
            <fa-icon [icon]="['fas', 'pencil-alt']" size="lg"></fa-icon>
          </button>
          <button
            mat-icon-button
            matTooltip="Delete this item"
            (click)="deleteConfirmDialog(row)"
          >
            <fa-icon [icon]="['fas', 'trash-alt']" size="lg"></fa-icon>
          </button>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="getDisplayedColumns()"></mat-header-row>
      <mat-row *matRowDef="let row; columns: getDisplayedColumns()"></mat-row>
    </mat-table>

    <mat-paginator
      [length]="pagination.totalItems"
      *ngIf="pagination"
      [pageIndex]="pagination.currentPage - 1"
      [pageSize]="pagination.itemsPerPage"
      [pageSizeOptions]="[20]"
      showFirstLastButtons="true"
      (page)="onChangePage($event)"
    ></mat-paginator>
  </div>
</div>
