<h1 mat-dialog-title>{{ isEditing ? "Update" : "Create" }} weight</h1>

<div mat-dialog-content>
  <form
    [formGroup]="form"
    fxLayout
    fxLayout.xs="column"
    fxLayoutGap="10px"
    novalidate
  >
    <mat-form-field fxFlex>
      <mat-label>Choose a date</mat-label>
      <input matInput [matDatepicker]="picker" formControlName="date" />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error
        *ngIf="!form.controls['date'].valid && form.controls['date'].touched"
      >
        {{ getErrorDate() }}
      </mat-error>
      <mat-error *ngIf="form.controls['date'].errors?.serverError">
        {{ form.controls["date"].errors?.serverError }}
      </mat-error>
    </mat-form-field>

    <mat-form-field fxFlex>
      <input
        [dropSpecialCharacters]="false"
        [showMaskTyped]="true"
        formControlName="time"
        mask="Hh:m0"
        matInput
        placeholder="Time"
        required
        type="text"
      />
      <mat-error
        *ngIf="!form.controls['time'].valid && form.controls['time'].touched"
      >
        {{ getErrorDate() }}
      </mat-error>
      <mat-error *ngIf="form.controls['time'].errors?.serverError">
        {{ form.controls["time"].errors?.serverError }}
      </mat-error>
    </mat-form-field>
    <!-- <input
        [dropSpecialCharacters]="false"
        [showMaskTyped]="true"
        formControlName="date"
        mask="d0/M0/0000 Hh:m0"
        matInput
        placeholder="Date"
        required
        type="text"
      /> -->
    <!-- <mat-error
        *ngIf="!form.controls['date'].valid && form.controls['date'].touched"
      >
        {{ getErrorDate() }}
      </mat-error>
      <mat-error *ngIf="form.controls['date'].errors?.serverError">
        {{ form.controls["date"].errors?.serverError }}
      </mat-error>
    </mat-form-field> -->

    <mat-form-field fxFlex>
      <input
        [dropSpecialCharacters]="true"
        formControlName="value"
        mask="separator.2"
        thousandSeparator="."
        matInput
        placeholder="Value (kg)"
        required
      />
      <mat-error
        *ngIf="!form.controls['value'].valid && form.controls['value'].touched"
      >
        {{ getErrorValue() }}
      </mat-error>
    </mat-form-field>
  </form>
</div>

<div fxLayout fxLayoutAlign="end" mat-dialog-actions>
  <button fxflex mat-button [mat-dialog-close]="true">Cancel</button>

  <button
    [disabled]="!form.valid || isLoading"
    fxflex
    mat-button
    *ngIf="!isEditing"
    type="button"
    (click)="onCreate(form)"
  >
    <fa-icon
      [icon]="['fas', 'spinner']"
      [spin]="true"
      *ngIf="isLoading"
    ></fa-icon>
    Create
  </button>

  <button
    [disabled]="!form.valid || isLoading"
    fxflex
    mat-button
    *ngIf="isEditing"
    type="button"
    (click)="onUpdate(form)"
  >
    <fa-icon
      [icon]="['fas', 'spinner']"
      [spin]="true"
      *ngIf="isLoading"
    ></fa-icon>
    Update
  </button>
</div>
